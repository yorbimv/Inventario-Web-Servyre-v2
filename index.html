<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Servyre | IT Advanced Management</title>
  <link rel="icon" type="image/svg+xml" href="/vite.svg" />
  <link rel="stylesheet" href="/src/style.css">
  <link rel="stylesheet" href="/src/css/dashboard.css">
  <script src="https://unpkg.com/lucide@latest"></script>
  <!-- Animate.css for quick premium transitions -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
</head>

<body class="bg-gradient">
  <button class="theme-toggle" id="themeToggle" title="Cambiar tema">
    <span class="theme-toggle-icon moon">üåô</span>
    <span class="theme-toggle-icon sun">‚òÄÔ∏è</span>
  </button>
  <div id="app">
    <header class="glass-header animate__animated animate__fadeInDown">
      <div class="header-content">
        <div class="logo-area">
          <h1>Servyre <span>IT</span></h1>
          <p class="subtitle">Gesti√≥n de Activos v2.0</p>
        </div>
        <div class="system-stats">
          <div class="stat-item">
            <span id="totalAssets">0</span>
            <label>Activos</label>
          </div>
          <div class="stat-divider"></div>
          <div class="stat-item">
            <span id="activeLocations">0</span>
            <label>Sedes</label>
          </div>
        </div>
      </div>
    </header>

    <nav class="nav-tabs">
      <button class="nav-tab active" id="tabDashboard">
        <i data-lucide="layout-dashboard"></i> Dashboard
      </button>
      <button class="nav-tab" id="tabInventory">
        <i data-lucide="database"></i> Inventario
      </button>
    </nav>

    <div id="dashboardContainer" class="animate__animated animate__fadeIn">
    </div>

    <section id="inventorySection" class="animate__animated animate__fadeIn" style="display: none;">
      <div class="inventory-toolbar">
        <div class="search-actions-row">
          <div class="search-bar-container glass-container" style="flex: 1; min-width: 300px;">
            <i data-lucide="search"></i>
            <input type="text" id="searchInput" placeholder="Buscar por serie, usuario, ubicaci√≥n o cualquier campo...">
          </div>
          <button id="addItemBtn" class="premium-btn primary">
            <i data-lucide="plus-circle"></i> <span>Nuevo Registro</span>
          </button>
        </div>
        <div class="actions-row">
          <div class="btn-group-glass">
            <button id="saveDiskBtn" class="glass-btn" style="color: var(--success);" title="Guardar">
              <i data-lucide="save"></i> <span>Guardar</span>
            </button>
            <button id="openDiskBtn" class="glass-btn" style="color: var(--primary);" title="Abrir">
              <i data-lucide="folder-open"></i> <span>Abrir</span>
            </button>
          </div>
          <div class="btn-group-glass">
            <button id="manageCatalogsBtn" class="glass-btn" title="Configuraci√≥n">
              <i data-lucide="settings"></i> <span>Ajustes</span>
            </button>
            <button id="importDataBtn" class="glass-btn" title="Importar">
              <i data-lucide="upload-cloud"></i> <span>Importar</span>
            </button>
            <button id="exportExcelBtn" class="glass-btn">
              <i data-lucide="file-spreadsheet"></i> <span>Excel</span>
            </button>
            <button id="exportPdfBtn" class="glass-btn">
              <i data-lucide="file-text"></i> <span>PDF</span>
            </button>
          </div>
        </div>
      </div>
    </section>

    <input type="file" id="importInput" style="display: none;" accept=".json,.xlsx,.xls">

    <main class="table-card glass-table-container animate__animated animate__fadeInUp">
      <div class="table-responsive">
        <table id="inventoryTable">
          <thead>
            <tr>
              <th>Resguardo</th>
              <th>Usuario</th>
              <th>Equipo</th>
              <th>Marca / Modelo</th>
              <th>Nombre PC</th>
              <th>Serie</th>
              <th>Ubicaci√≥n</th>
              <th>Estado</th>
              <th></th>
            </tr>
          </thead>
          <tbody id="inventoryBody">
            <!-- Content Injected via JS -->
          </tbody>
        </table>
      </div>
    </main>

    <footer class="system-footer">
      <p>&copy; 2026 Servyre IT ‚Ä¢ Gesti√≥n de Activos ‚Ä¢ Desarrollado por Jorge Meneses ‚Ä¢ Contacto: jorge.meneses@servyre.com</p>
    </footer>
  </div>

  <!-- MAIN FORM MODAL -->
  <div id="modalOverlay" class="modal-overlay glass-blur">
    <div class="modal premium-modal">
      <div class="modal-header">
        <h2 id="modalTitle">Nuevo Registro de IT</h2>
        <button id="closeModal" class="close-btn">&times;</button>
      </div>
      <form id="inventoryForm">
        <div class="modal-body-premium">
          <input type="hidden" id="itemId">

          <div class="form-section">
            <h3><i data-lucide="users"></i> Datos del Resguardo</h3>
            <div class="form-grid form-grid-2" style="grid-template-columns: 1fr 1fr 1fr;">
              <div class="form-group"><label>N¬∞ Resguardo</label><input type="text" id="resguardo" class="uppercase"></div>
              <div class="form-group">
                <label>Estado</label>
                <select id="status" class="status-select">
                  <option value="Activo">Activo</option>
                  <option value="Mantenimiento">Mantenimiento</option>
                  <option value="Baja">Baja</option>
                  <option value="Cancelado">Cancelado</option>
                  <option value="Para piezas">Para piezas</option>
                </select>
              </div>
              <div class="form-group"><label>Usuario</label><input type="text" id="fullName" class="uppercase"></div>
              <div class="form-group"><label>Puesto</label><input type="text" id="position" class="uppercase"></div>
              <div class="form-group"><label>Correo</label><input type="email" id="email"></div>
              <div class="form-group"><label>Extensi√≥n</label><input type="text" id="extension" class="uppercase"></div>
              <div class="form-group"><label>Departamento</label><input type="text" id="department" class="uppercase"></div>
              <div class="form-group"><label>Direcci√≥n</label><input type="text" id="address" class="uppercase"></div>
              <div class="form-group"><label>Ubicaci√≥n</label><select id="location"></select></div>
            </div>
          </div>

          <div class="form-section">
            <h3><i data-lucide="cpu"></i> Especificaciones del Equipo</h3>
            <div class="form-grid form-grid-2">
              <div class="form-group">
                <label>Tipo de Equipo</label>
                <select id="deviceType">
                  <option value="Laptop">Laptop</option>
                  <option value="Desktop">Desktop</option>
                  <option value="Servidor">Servidor</option>
                  <option value="Monitor">Monitor</option>
                  <option value="Impresora">Impresora</option>
                  <option value="Otro">Otro</option>
                </select>
              </div>
              <div class="form-group"><label>Marca</label><select id="brand"></select></div>
              <div class="form-group"><label>Modelo</label><select id="model" disabled></select></div>
              <div class="form-group"><label>Serie</label><input type="text" id="serialNumber" class="uppercase"></div>
              <div class="form-group"><label>Sistema Operativo</label>
                <select id="os">
                  <option value="">Seleccionar...</option>
                  <optgroup label="Windows 8.1">
                    <option value="Windows 8.1 Standard">Windows 8.1 Standard</option>
                    <option value="Windows 8.1 Pro">Windows 8.1 Pro</option>
                  </optgroup>
                  <optgroup label="Windows 10">
                    <option value="Windows 10 Home">Windows 10 Home</option>
                    <option value="Windows 10 Pro">Windows 10 Pro</option>
                    <option value="Windows 10 Enterprise">Windows 10 Enterprise</option>
                    <option value="Windows 10 Education">Windows 10 Education</option>
                    <option value="Windows 10 LTSC">Windows 10 LTSC</option>
                  </optgroup>
                  <optgroup label="Windows 11">
                    <option value="Windows 11 Home">Windows 11 Home</option>
                    <option value="Windows 11 Pro">Windows 11 Pro</option>
                    <option value="Windows 11 Enterprise">Windows 11 Enterprise</option>
                  </optgroup>
                  <optgroup label="macOS">
                    <option value="macOS Ventura">macOS Ventura</option>
                    <option value="macOS Monterey">macOS Monterey</option>
                    <option value="macOS Sonoma">macOS Sonoma</option>
                    <option value="macOS Big Sur">macOS Big Sur</option>
                  </optgroup>
                  <optgroup label="Linux">
                    <option value="Ubuntu">Ubuntu</option>
                    <option value="Fedora">Fedora</option>
                    <option value="Linux Mint">Linux Mint</option>
                    <option value="Debian">Debian</option>
                    <option value="Otro Linux">Otro Linux</option>
                  </optgroup>
                </select>
              </div>
              <div class="form-group"><label>Nombre PC</label><input type="text" id="pcName" class="uppercase"></div>
              <div class="form-group"><label>Procesador</label><input type="text" id="processor"></div>
              <div class="form-group"><label>RAM (GB)</label><input type="text" id="ram" placeholder="ej: 16 GB"></div>
              <div class="form-group"><label>Disco (GB)</label><input type="text" id="storageCapacity" placeholder="ej: 512 GB SSD"></div>
              <div class="form-group"><label>Mouse Externo</label><input type="text" id="mouseExternal" placeholder="Serie del mouse" class="uppercase"></div>
            </div>
          </div>

          <div class="form-section">
            <h3><i data-lucide="shield-check"></i> Garant√≠a y Costos</h3>
            <div class="form-grid form-grid-2">
              <div class="form-group"><label>Precio Unitario</label><input type="text" id="price" placeholder="ej: $15,000.00"></div>
              <div class="form-group"><label>Fecha de Compra</label><input type="date" id="purchaseDate"></div>
              <div class="form-group"><label>Garant√≠a (meses)</label><input type="number" id="warranty" placeholder="ej: 12"></div>
            </div>
          </div>

          <div class="form-section">
            <h3><i data-lucide="monitor"></i> Perif√©ricos / Accesorios</h3>
            <div class="form-grid form-grid-2">
              <div class="form-group"><label>Marca (Monitor/Accesorio)</label><input type="text" id="periphBrand" class="uppercase"></div>
              <div class="form-group"><label>Modelo (Monitor/Accesorio)</label><input type="text" id="periphModel" class="uppercase"></div>
              <div class="form-group"><label>Serie (Monitor/Accesorio)</label><input type="text" id="periphSerial" class="uppercase"></div>>
            </div>
          </div>

          <div class="form-section">
            <h3><i data-lucide="tool"></i> Mantenimiento</h3>
            <div class="form-grid form-grid-2">
              <div class="form-group"><label>√öltimo Mantenimiento</label><input type="date" id="lastMtto"></div>
              <div class="form-group"><label>Pr√≥ximo Mantenimiento</label><input type="date" id="nextMtto"></div>
            </div>
          </div>

          <div class="form-section">
            <h3><i data-lucide="alert-triangle"></i> Condiciones e Incidentes</h3>
            <div class="form-grid form-grid-2">
              <div class="form-group">
                <label>Condiciones del Equipo</label>
                <textarea id="conditions" rows="2" placeholder="Estado f√≠sico, reparaciones realizadas..."></textarea>
              </div>
              <div class="form-group">
                <label>Reporte de Incidentes</label>
                <textarea id="incidentReport" rows="2" placeholder="Fallas, golpes, robos, etc."></textarea>
              </div>
            </div>
          </div>

          <div class="form-section">
            <h3><i data-lucide="link"></i> Documentaci√≥n</h3>
            <div class="form-grid form-grid-2">
              <div class="form-group full-width">
                <label>Links / Fotos</label>
                <input type="url" id="photos" placeholder="https://...">
              </div>
              <div class="form-group full-width">
                <label>Observaciones Adicionales</label>
                <textarea id="notes" rows="3" placeholder="Notas internas, detalles del resguardo..."></textarea>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer-premium">
          <button type="button" id="cancelBtn" class="cancel-btn">Descartar</button>
          <button type="submit" class="save-btn">Guardar Informaci√≥n</button>
        </div>
      </form>
    </div>
  </div>

  <!-- SETTINGS MODAL (CATALOGS) -->
  <div id="catalogModalOverlay" class="modal-overlay glass-blur">
    <div class="modal glass-modal settings-modal">
      <div class="modal-header">
        <h2><i data-lucide="settings"></i> Ajustes</h2>
        <button id="closeCatalogModal" class="close-btn">&times;</button>
      </div>
      <div class="settings-layout">
        <nav class="settings-nav">
          <button class="nav-item active" onclick="switchCat('brands')">Marcas y Modelos</button>
          <button class="nav-item" onclick="switchCat('locations')">Ubicaciones</button>
          <button class="nav-item" onclick="switchCat('plantilla')">Plantilla Excel</button>
        </nav>
        <div class="settings-content">
          <div id="cat-brands" class="cat-section">
            <div class="catalog-grid">
              <div class="catalog-card">
                <h3>Gesti√≥n de Marcas</h3>
                <div class="add-group">
                  <input type="text" id="newBrandInput" placeholder="Ej: Microsoft">
                  <button id="addBrandBtn" class="add-btn"><i data-lucide="plus"></i></button>
                </div>
                <ul id="brandList" class="styled-list"></ul>
              </div>
              <div class="catalog-card">
                <h3>Modelos Asociados</h3>
                <select id="catalogBrandSelect"></select>
                <div id="modelManagementSection" style="display: none;">
                  <div class="add-group">
                    <input type="text" id="newModelInput" placeholder="Ej: Surface Pro 9">
                    <button id="addModelBtn" class="add-btn"><i data-lucide="plus"></i></button>
                  </div>
                  <ul id="modelList" class="styled-list"></ul>
                </div>
              </div>
            </div>
          </div>
          <div id="cat-locations" class="cat-section" style="display: none;">
            <div class="catalog-grid">
              <div class="catalog-card">
                <h3>Sedes</h3>
                <div class="add-group">
                  <input type="text" id="newLocationInput" placeholder="Ej: Corporativo">
                  <button id="addLocationBtn" class="add-btn"><i data-lucide="plus"></i></button>
                </div>
                <ul id="locationList" class="styled-list"></ul>
              </div>
              <div class="catalog-card">
                <h3>Externo</h3>
                <div class="add-group">
                  <input type="text" id="newLocationInput2" placeholder="Ej: Campo">
                  <button id="addLocationBtn2" class="add-btn"><i data-lucide="plus"></i></button>
                </div>
                <ul id="locationList2" class="styled-list"></ul>
              </div>
            </div>
          </div>
          <div id="cat-plantilla" class="cat-section" style="display: none;">
            <div class="plantilla-section">
              <div class="plantilla-info">
                <h3><i data-lucide="file-spreadsheet"></i> Importar Registros desde Excel</h3>
                <p>Sigue estos pasos para importar tus registros:</p>
                <ol class="plantilla-steps">
                  <li><strong>Descarga la plantilla:</strong> Haz clic en el bot√≥n "Descargar Plantilla" abajo.</li>
                  <li><strong>Llena los datos:</strong> Abre el archivo Excel y completa la informaci√≥n de cada activo.</li>
                  <li><strong>Importa los datos:</strong> En la pantalla principal, haz clic en "Importar" y selecciona tu archivo.</li>
                </ol>
                <div class="plantilla-note">
                  <i data-lucide="info"></i>
                  <span>Los registros se agregar√°n a tu inventario existente.</span>
                </div>
              </div>
              <div class="plantilla-download">
                <button class="excel-btn" onclick="window.downloadTemplate()">
                  <i data-lucide="file-spreadsheet"></i>
                </button>
                <span style="font-size: 0.8rem; color: var(--text-dim);">Descargar Plantilla</span>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer-premium">
        <button id="finishCatalogBtn" class="save-btn">Cerrar Ajustes</button>
      </div>
    </div>
  </div>

  <!-- DETAIL VIEW (PASSPORT) -->
  <div id="detailModalOverlay" class="modal-overlay glass-blur">
    <div class="modal detail-modal">
      <div class="modal-header no-border">
        <button id="closeDetailModal" class="close-btn">&times;</button>
      </div>
      <div class="modal-body-detail" id="detailModalBody">
        <!-- Data injected by JS -->
      </div>
      <div class="modal-footer-detail">
        <button id="printDetailBtn" class="action-btn"><i data-lucide="printer"></i> Ficha PDF</button>
        <button id="editFromDetailBtn" class="action-btn primary"><i data-lucide="edit-3"></i> Editar Datos</button>
      </div>
    </div>
  </div>

  <!-- PDF COLUMN SELECTOR MODAL -->
  <div id="pdfColumnModal" class="modal-overlay glass-blur">
    <div class="modal pdf-column-modal">
      <div class="modal-header">
        <h2><i data-lucide="columns"></i> Configurar Reporte PDF</h2>
        <button id="closePdfColumnModal" class="close-btn">&times;</button>
      </div>
      <div class="modal-body-premium">
        <p class="pdf-column-desc">Selecciona las columnas que deseas incluir en el reporte:</p>
        
        <div class="pdf-column-grid" id="pdfColumnGrid">
          <label class="pdf-column-checkbox">
            <input type="checkbox" value="resguardo" checked> <span>N¬∞ Resguardo</span>
          </label>
          <label class="pdf-column-checkbox">
            <input type="checkbox" value="fullName" checked> <span>Usuario</span>
          </label>
          <label class="pdf-column-checkbox">
            <input type="checkbox" value="position" checked> <span>Puesto</span>
          </label>
          <label class="pdf-column-checkbox">
            <input type="checkbox" value="department" checked> <span>Departamento</span>
          </label>
          <label class="pdf-column-checkbox">
            <input type="checkbox" value="location" checked> <span>Ubicaci√≥n</span>
          </label>
          <label class="pdf-column-checkbox">
            <input type="checkbox" value="deviceType" checked> <span>Tipo Equipo</span>
          </label>
          <label class="pdf-column-checkbox">
            <input type="checkbox" value="brand" checked> <span>Marca</span>
          </label>
          <label class="pdf-column-checkbox">
            <input type="checkbox" value="model" checked> <span>Modelo</span>
          </label>
          <label class="pdf-column-checkbox">
            <input type="checkbox" value="serialNumber" checked> <span>Serie</span>
          </label>
          <label class="pdf-column-checkbox">
            <input type="checkbox" value="pcName" checked> <span>Nombre PC</span>
          </label>
          <label class="pdf-column-checkbox">
            <input type="checkbox" value="os"> <span>Sistema Operativo</span>
          </label>
          <label class="pdf-column-checkbox">
            <input type="checkbox" value="processor"> <span>Procesador</span>
          </label>
          <label class="pdf-column-checkbox">
            <input type="checkbox" value="ram"> <span>RAM</span>
          </label>
          <label class="pdf-column-checkbox">
            <input type="checkbox" value="storageCapacity"> <span>Disco</span>
          </label>
          <label class="pdf-column-checkbox">
            <input type="checkbox" value="email"> <span>Correo</span>
          </label>
          <label class="pdf-column-checkbox">
            <input type="checkbox" value="extension"> <span>Extensi√≥n</span>
          </label>
          <label class="pdf-column-checkbox">
            <input type="checkbox" value="status" checked> <span>Estado</span>
          </label>
          <label class="pdf-column-checkbox">
            <input type="checkbox" value="price"> <span>Precio</span>
          </label>
          <label class="pdf-column-checkbox">
            <input type="checkbox" value="purchaseDate"> <span>Fecha Compra</span>
          </label>
          <label class="pdf-column-checkbox">
            <input type="checkbox" value="mouseExternal"> <span>Mouse</span>
          </label>
        </div>

        <div class="pdf-column-actions">
          <button id="selectAllColumns" class="glass-btn">Seleccionar Todo</button>
          <button id="deselectAllColumns" class="glass-btn">Deseleccionar Todo</button>
        </div>
      </div>
      <div class="modal-footer-premium">
        <button id="cancelPdfBtn" class="cancel-btn">Cancelar</button>
        <button id="generatePdfBtn" class="save-btn">Generar PDF</button>
      </div>
    </div>
  </div>

  <script type="module" src="/src/main.js"></script>
</body>

</html>